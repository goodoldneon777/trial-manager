$(document).ready(function(){function a(){b(),c()}function b(){g={}}function c(){"use strict";$("#m-search-form .trial-name").keyup(function(){d()}),$("#m-search-form input").change(function(){d()}),$("#m-search-form select").change(function(){d()}),$("#submit").click(function(){d()})}function d(){var a=null;a=e(),0===a.length?($("#error-box").html(""),f()):(a='<div class="alert alert-danger" style="text-align:left">\n    <ul>\n'+a+"</ul>\n</div>",$("#error-box").html(a))}function e(){var a="",b=$("#m-search-form .start-date input").val(),c=$("#m-search-form .end-date input").val();return b.length>0&&!isValidDate(b)&&(a+="<li>'Start Date' is not a valid date.</li>\n"),c.length>0&&!isValidDate(c)&&(a+="<li>'End Date' is not a valid date.</li>\n"),b.length>0&&c.length>0&&isValidDate(b)&&isValidDate(c)&&(b=stringToDate(b),c=stringToDate(c),b>c&&(a+="<li>'Start Date' is after 'End Date'</li>\n")),a}function f(){g.data={trialName:prepForSQL($("#m-search-form .trial-name input").val()),startDate:prepForSQL($("#m-search-form .start-date input").val(),"date"),endDate:prepForSQL($("#m-search-form .end-date input").val(),"date"),unit:prepForSQL($("#m-search-form .trial-unit select").val()),trialType:prepForSQL($("#m-search-form .trial-type select").val()),changeType:prepForSQL($("#m-search-form .change-type select").val())},$.ajax({type:"POST",url:"php/dist/sql-search.php",data:{input:JSON.stringify(g.data)},dataType:"json",success:function(a){$("#m-search-results .contents").html(a.html)},error:function(a,b,c){alert("Status: "+b+"\nError: "+c)}})}var g={};a()});