$(document).ready(function(){"use strict";function a(){b(),c()}function b(){g={}}function c(){$("#m-search-form .trial-name").keyup(function(){d()}),$("#m-search-form input").change(function(){d()}),$("#m-search-form select").change(function(){d()}),$("#submit").click(function(){d()})}function d(){var a=null,b="";a=e(),0===a.length?($(".errorHolder").html(""),f()):(b='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+a+"</ul></div>",BootstrapDialog.alert({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:b,closable:!1}),a='<div class="alert alert-danger">    <ul>'+a+"</ul></div>",$(".errorHolder").html(a))}function e(){var a="",b=$("#m-search-form .start-date input").val(),c=$("#m-search-form .end-date input").val();return b.length>0&&!isValidDate(b)&&(a+="<li>'Start Date' is not a valid date.</li>"),c.length>0&&!isValidDate(c)&&(a+="<li>'End Date' is not a valid date.</li>"),b.length>0&&c.length>0&&isValidDate(b)&&isValidDate(c)&&(b=stringToDate(b),c=stringToDate(c),b>c&&(a+="<li>'Start Date' is after 'End Date'</li>")),a}function f(){g.data={trialName:prepForSQL($("#m-search-form .trial-name input").val()),startDate:prepForSQL($("#m-search-form .start-date input").val(),"date"),endDate:prepForSQL($("#m-search-form .end-date input").val(),"date"),unit:prepForSQL($("#m-search-form .trial-unit select").val()),trialType:prepForSQL($("#m-search-form .trial-type select").val()),changeType:prepForSQL($("#m-search-form .change-type select").val())},$.ajax({type:"POST",url:"php/dist/sql-search.php",data:{input:JSON.stringify(g.data)},dataType:"json",success:function(a){$("#m-search-results .contents").html(a.html)},error:function(a,b,c){var d=new BootstrapDialog({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})}var g={};a()});