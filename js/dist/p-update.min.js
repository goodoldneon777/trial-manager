$(document).ready(function(){"use strict";function a(){b(),c()}function b(){h={}}function c(){$("#submit").click(function(){d()}),$("#delete").click(function(){e()})}function d(){var a="",b="";a+=m_trialInfo.validate(),a+=m_trialHeatData.validate(),a+=m_trialComment_list.validate(),0===a.length?($(".errorHolder").html(""),f()):(b='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+a+"</ul></div>",BootstrapDialog.alert({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:b,closable:!1}),a='<div class="alert alert-danger">\n    <ul>\n'+a+"</ul>\n</div>",$(".errorHolder").html(a))}function e(){BootstrapDialog.confirm({title:"Warning",type:BootstrapDialog.TYPE_WARNING,message:'<h3 style="text-align:center;">This will permanently delete the trial. \n \nAre you sure?</h3>',closable:!1,callback:function(a){a&&g()}})}function f(){var a=getURLVariable("trialseq"),b=m_trialInfo.parse(),c=m_trialComment_list.parse(),d=m_trialHeatData.parse();$.ajax({type:"POST",url:"php/dist/sql-update.php",data:{trialSeq:JSON.stringify(prepForSQL(a)),trialInfo:JSON.stringify(b),trialComment_list:JSON.stringify(c),trialHeatData:JSON.stringify(d)},dataType:"json",success:function(b){if("success"===b.status){var c=new BootstrapDialog({title:"Success",type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">Trial successfully updated.</h3>',closable:!1,buttons:[{label:"OK",action:function(){document.location.href="view.php?trialseq="+a}}]});c.open()}else{var c=new BootstrapDialog({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">Something went wrong. Trial not updated.</h3>',closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]});c.open(),console.log(b.errors)}},error:function(a,b,c){var d=new BootstrapDialog({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})}function g(){$.ajax({type:"POST",url:"php/dist/sql-delete.php",data:{trialSeq:prepForSQL(getURLVariable("trialseq"))},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:"Success",type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">Trial successfully deleted.</h3>',closable:!1,buttons:[{label:"OK",action:function(){document.location.href="index.php"}}]});b.open()}else{var b=new BootstrapDialog({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">Something went wrong. Trial not deleted.</h3>',closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]});b.open(),console.log(a.errors)}},error:function(a,b,c){var d=new BootstrapDialog({title:"Error",type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,closable:!1,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})}var h={};a()});