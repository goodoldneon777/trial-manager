$(document).ready(function(){"use strict";function a(){b(),c()}function b(){j={}}function c(){$("#submit").click(function(){d()}),$("#delete").click(function(){e()})}function d(){var a="",b="";"trial"===l?(a+=m_trialInfo.validate(),a+=m_trialHeatData.validate()):"group"===l&&(a+=m_groupInfo.validate()),0===a.length?($(".errorHolder").html(""),"trial"===l?f():"group"===l&&h()):(b='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+a+"</ul></div>",BootstrapDialog.alert({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:b}),a='<div class="alert alert-danger">\n    <ul>\n'+a+"</ul>\n</div>",$(".errorHolder").html(a))}function e(){BootstrapDialog.confirm({title:'<span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>&nbsp;&nbsp;Warning',type:BootstrapDialog.TYPE_WARNING,message:'<h3 style="text-align:center;">This will permanently delete the trial. \n \nAre you sure?</h3>',closable:!1,callback:function(a){a&&("trial"===l?g():"group"===l&&i())}})}function f(){var a=getURLVariable("trialseq"),b=m_trialInfo.parse(),c=m_trialComment_list.parse(),d=m_trialHeatData.parse();$.ajax({type:"POST",url:"php/dist/sql-update.php",data:{trialSeq:JSON.stringify(prepForSQL(a)),trialInfo:JSON.stringify(b),trialComment_list:JSON.stringify(c),trialHeatData:JSON.stringify(d)},dataType:"json",success:function(b){if("success"===b.status){var c=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">Trial successfully updated.</h3>',buttons:[{label:"OK",action:function(){document.location.href="view.php?trialseq="+a}}]});c.open()}else{var c=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">Something went wrong. Trial not updated.</h3>',buttons:[{label:"OK",action:function(a){a.close()}}]});c.open(),console.log(b.errors),console.log(b.debugSQL)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open(),console.log(results.debugSQL)}})}function g(){$.ajax({type:"POST",url:"php/dist/sql-delete.php",data:{trialSeq:prepForSQL(getURLVariable("trialseq"))},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">Trial successfully deleted.</h3>',buttons:[{label:"OK",action:function(){document.location.href="index.php"}}]});b.open()}else{var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">Something went wrong. Trial not deleted.</h3>',buttons:[{label:"OK",action:function(a){a.close()}}]});b.open(),console.log(a.errors)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})}function h(){var a=k,b=m_groupInfo.parse(),c="view.php?groupseq="+a,d="Group successfully updated.",e="Something went wrong. Group not updated.";$.ajax({type:"POST",url:"php/dist/sql-updateGroup.php",data:{seq:JSON.stringify(prepForSQL(a)),info:JSON.stringify(b)},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">'+d+"</h3>",buttons:[{label:"OK",action:function(){document.location.href=c}}]});b.open()}else{var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">'+e+"</h3>",buttons:[{label:"OK",action:function(a){a.close()}}]});b.open(),console.log(a.errors),console.log(a.debugSQL)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open(),console.log(results.debugSQL)}})}function i(){var a=k,b="Group successfully deleted.",c="Something went wrong. Group not updated.";$.ajax({type:"POST",url:"php/dist/sql-deleteGroup.php",data:{seq:prepForSQL(a)},dataType:"json",success:function(a){if("success"===a.status){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">'+b+"</h3>",buttons:[{label:"OK",action:function(){document.location.href="index.php"}}]});d.open()}else{var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">'+c+"</h3>",buttons:[{label:"OK",action:function(a){a.close()}}]});d.open(),console.log(a.errors)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})}var j={},k=(getURLVariable("trialseq"),getURLVariable("groupseq")),l="";l=k?"group":"trial",a()});