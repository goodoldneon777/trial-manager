$(document).ready(function(){"use strict";function a(){b(),c()}function b(){f={}}function c(){$("#submit").click(function(){d()})}function d(){var a="",b="";a+=m_trialComment_add.validate(),0===a.length?($(".errorHolder").html(""),e()):(b='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+a+"</ul></div>",BootstrapDialog.alert({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:b}),a='<div class="alert alert-danger">\n    <ul>\n'+a+"</ul>\n</div>",$(".errorHolder").html(a))}function e(){var a=getURLVariable("trialseq"),b=m_trialComment_add.parse();$.ajax({type:"POST",url:"php/dist/sql-create-comment.php",data:{trialSeq:JSON.stringify(prepForSQL(a)),trialComment_add:JSON.stringify(b)},dataType:"json",success:function(b){if("success"===b.status){var c=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">Comment successfully created.</h3>',buttons:[{label:"OK",action:function(){document.location.href="view.php?trialseq="+a}}]});c.open()}else{var c=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">Something went wrong. Comment not created.</h3>',buttons:[{label:"OK",action:function(a){a.close()}}]});c.open(),console.log(b.errors)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"<h3>Status: "+b+"\nError: "+c+"</h3>",buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})}var f={};a()});