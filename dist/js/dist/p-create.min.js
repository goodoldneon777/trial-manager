$(document).ready(function(){"use strict";function a(){b(),c()}function b(){f={}}function c(){$("#submit").click(function(){d()})}function d(){var a=getURLVariable("type"),b="",c="";"group"!==a&&(a="trial"),"trial"===a?(b+=m_info_trial.validate(),b+=m_heatData_trial.validate()):"group"===a&&(b+=m_info_group.validate()),0===b.length?($(".errorHolder").html(""),"group"===a?e("group"):"trial"===a&&e("trial")):(c='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+b+"</ul></div>",BootstrapDialog.alert({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:c}),b='<div class="alert alert-danger">\n    <ul>\n'+b+"</ul>\n</div>",$(".errorHolder").html(b))}function e(a){var b={},c={},d=[],e="",f="",g="",h="";"trial"===a?(b=m_info_trial.parse(),c=m_heatData_trial.parse(),e="php/dist/sql-createTrial.php",f="view.php?trialseq=",g="Trial successfully created.",h="Something went wrong. Trial not created."):"group"===a&&(b=m_info_group.parse(),d=m_childList_group.parse(),e="php/dist/sql-createGroup.php",f="view.php?groupseq=",g="Group successfully created.",h="Something went wrong. Group not created."),$.ajax({type:"POST",url:e,data:{info:JSON.stringify(b),heatData:JSON.stringify(c),childTrialList:JSON.stringify(d)},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">'+g+"</h3>",buttons:[{label:"OK",action:function(){b.close(),document.location.href=f+a.seq}}]});b.open()}else{var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">'+h+"</h3>",buttons:[{label:"OK",action:function(a){b.close()}}]});b.open(),console.log(a.errors),console.log(a.debugSQL)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){d.close()}}]});d.open()}})}var f={};a()});