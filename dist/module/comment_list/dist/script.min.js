autosize($(".m_comment_list textarea")),autosize($(".c_commentInput"));var m_comment_list={};m_comment_list.watch=function(){"use strict";$(".m_comment_list").on("click",".actions .delete",function(){m_comment_list.deleteClick($(this))}),$(".m_comment_list .addCommentBtn").click(function(){m_comment_list.addClick()})},m_comment_list.validate=function(){"use strict";var a="",b="",c="";return $.each($(".m_comment_list tbody tr"),function(d,e){b=ifBlank($(this).find(".commentDate input").val(),null),c=ifBlank($(this).find(".commentText textarea").val(),null),!b&&c?a+="<li>Comment date is blank but comment text isn't.</li>":b&&!c?a+="<li>Comment text is blank but comment date isn't.</li>":b&&!isValidDate(b)&&(a+="<li>Invalid comment date: "+b+".</li>")}),a},m_comment_list.parse=function(){"use strict";var a=[],b=[],c="",d="",e="",f="",g=0;g=0,$.each($(".m_comment_list tbody tr"),function(b,h){c=getSeqFromAttrClass($(this).attr("class")).classSeq,0===c.indexOf("seq-")&&(d=getSeqFromAttrClass($(this).attr("class")).seq,e=prepDateForSQL(ifBlank($(this).find(".commentDate input").val(),null)),f=ifBlank($(this).find(".commentText textarea").val(),null),e&&f&&(a[g]=[],a[g][0]=d,a[g][1]=e,a[g][2]=f,g+=1))}),g=0,$.each($(".m_comment_list tbody tr"),function(a,c){0===$(this).attr("class").indexOf("new")&&(e=prepDateForSQL(ifBlank($(this).find(".commentDate input").val(),null)),f=ifBlank($(this).find(".commentText textarea").val(),null),e&&f&&(b[g]=[],b[g][0]=g+1,b[g][1]=e,b[g][2]=f,g+=1))});var h={oldArr:a,newArr:b};return h},m_comment_list.deleteClick=function(a){"use strict";function b(a){var b="";a.remove(),0===$(".m_comment_list tbody tr").length&&(b='<tr class="noResults"><td colspan="3">No comments found</td></tr>',$(".m_comment_list tbody").html(b))}a=a.closest("tr"),BootstrapDialog.confirm({title:'<span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>&nbsp;&nbsp;Warning',type:BootstrapDialog.TYPE_WARNING,message:"<h2 style=\"text-align:center;\">Are you sure?</h2>\n\nThis will permanently delete the comment when you click the 'Update' button.",closable:!1,callback:function(c){c&&b(a)}})},m_comment_list.addClick=function(){"use strict";function a(a){var b=moment().format("M/D/YYYY HH:mm"),c='<tr class="new">  <td class="commentDate">    <div class="input-group noPad-xs">      <input class="form-control" rows="1" value="'+b+'">    </div>  </td>  <td class="commentText">    <div class="input-group noPad-xs">      <textarea class="form-control" rows="1">'+a+'</textarea>    </div>  </td>  <td class="actions">    <div class="noPad-xs">      <a href="javascript: void(0)" class="delete">Delete</a>    </div>  </td></tr>';if(0===$(".m_comment_list table .noResults").length){var d=$(".m_comment_list table tbody").html();$(".m_comment_list table tbody").html(c+d)}else $(".m_comment_list table tbody").html(c);autosize($(".m_comment_list textarea"))}var b="",c='<textarea class="c_commentAdd form-control" rows="4" style="resize:none;"></textarea><script>autosize($(\'.c_commentInput\'));</script>';BootstrapDialog.show({title:'<span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>&nbsp;&nbsp;Input Comment',message:c,buttons:[{label:"Close",action:function(a){a.close()}},{label:"Add",cssClass:"btn-primary",action:function(c){b=c.getModalBody().find("textarea").val(),a(b),c.close()}}]})},$(document).ready(function(){m_comment_list.watch()});