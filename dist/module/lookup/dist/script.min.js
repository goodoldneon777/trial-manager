var m_lookup={};m_lookup.start=function(){"use strict";m_lookup.watch(),m_lookup.createInputTable()},m_lookup.watch=function(){"use strict";$(".m_lookup .c_submitBtn .submit").click(function(){m_lookup.submit()})},m_lookup.validate=function(){"use strict";var a="",b=null,c=null;return inputArr=m_lookup.parse(),$.each(inputArr,function(d,e){return b=e[0],c=e[1],null===b||null===c?(a+="<li>'ID' and 'Tap Year' are required on all used rows in the input table.</li>",!1):void 0}),$.each(inputArr,function(b,d){return c=d[1],null!==c&&2!==c.length?(a+="<li>'Tap Year' must be in 'YY' format (e.g. 15 for 2015) in the input table.</li>",!1):void 0}),a},m_lookup.submit=function(){var a="",b="",c="";inputArr=m_lookup.parse(),a=m_lookup.validate(),0===a.length?($(".m_lookup .c_errorBox .content").html(""),m_lookup.search()):(b='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+a+"</ul></div>",c=b,dialogError(c),a='<div class="alert alert-danger">    <ul>'+a+"</ul></div>",$(".m_lookup .c_errorBox .content").html(a))},m_lookup.search=function(){"use strict";var a="",b=m_lookup.parse(),c=getURLVariable("type");"group"!==c&&(c="trial"),$.ajax({type:"POST",url:gVar.root+"/module/lookup/dist/sql_search.php",data:{input:JSON.stringify(b),pageType:JSON.stringify(c)},dataType:"json",success:function(a){$(".m_lookup .c_results").html(a.html),console.log(a.sql)},error:function(b,c,d){a="Status: "+c+"\nError: "+d,dialogError(a)}})},m_lookup.createInputTable=function(){"use strict";var a=null,b=null;a=['<span class="required">ID</span>','<span class="required">Tap Year (YY)</span>'];var c=$(".m_lookup .inputTable");c.handsontable({colHeaders:a,colWidths:b,manualColumnResize:!0,columns:[{data:0,type:"text"},{data:1,type:"text"}],rowHeaders:!1,manualRowResize:!0,minRows:10,minSpareRows:1,stretchH:"all",scrollV:"auto",columnSorting:!0,contextMenu:!0})},m_lookup.parse=function(){"use strict";var a=null,b=$(".m_lookup .inputTable").handsontable("getInstance").getData(),c=[];return $.each(b,function(b,d){a=!0,$.each(d,function(b,c){0===ifNull(c,"").replace(/ /g,"").length&&(c=null),null!==c&&(a=!1),d[b]=c}),a||c.push(d)}),c},$(document).ready(function(){m_lookup.start()});