var p_comment={};p_comment.watch=function(){"use strict";$(".p_comment .c_submitBtn button").click(function(){p_comment.submitClick()})},p_comment.submitClick=function(){"use strict";var a=getURLVariable("trialseq"),b=getURLVariable("groupseq"),c="",d="",e="",f="";a?(d="trial",c=a):b&&(d="group",c=b),0===e.length?($(".p_comment .c_errorBox").html(""),p_comment.create(d,c)):(f='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+e+"</ul></div>",BootstrapDialog.alert({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:f}),e='<div class="alert alert-danger">    <ul>'+e+"</ul></div>",$(".p_comment .c_errorBox").html(e))},p_comment.create=function(a,b){"use strict";var c=m_comment_add.parse(),d=gVar.root+"/page/comment/dist/sql_create.php",e="",f="Comment successfully added.",g="Something went wrong. Comment not added.";"trial"===a?e="view?trialseq=":"group"===a&&(e="view?groupseq="),$.ajax({type:"POST",url:d,data:{pageType:a,seq:b,comment:JSON.stringify(c)},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">'+f+"</h3>",buttons:[{label:"OK",action:function(){b.close(),document.location.href=e+a.seq}}]});b.open()}else{var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">'+g+"</h3>",buttons:[{label:"OK",action:function(a){b.close()}}]});b.open(),console.log(a.errors),console.log(a.debugSQL)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){d.close()}}]});d.open()}})},$(document).ready(function(){p_comment.watch()});