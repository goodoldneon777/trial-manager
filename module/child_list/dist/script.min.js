var m_child_list={};m_child_list.watch=function(){"use strict";$(".m_child_list .addTrialBtn").click(function(){m_child_list.addTrialDialog()}),$(".m_child_list").on("click",".actions .remove",function(){m_child_list.removeClick($(this))})},m_child_list.validate=function(){"use strict";var a=[],b="",c="",d="";return $.each($(".m_child_list .childTable tbody tr"),function(d,e){b=$(this).attr("class"),c=getSeqFromAttrClass(b).seq,c.length>0&&(a[d]=c)}),a.length!==uniqueArr(a).length&&(d+="<li>You have at least 1 duplicate trial in your 'Trials In This Group' section. Trials can only appear once in this list.</li>"),d},m_child_list.parse=function(){"use strict";var a=[],b="",c="";return $.each($(".m_child_list .childTable tbody tr"),function(d,e){b=$(this).attr("class"),c=getSeqFromAttrClass(b).seq,c.length>0&&(a[d]=c)}),a},m_child_list.addTrialDialog=function(){"use strict";function a(){var a="",c=null;b=m_search_trial_add.parse(),0===b.arr.length?(a='<h3 style="text-align:center;">No trials have been selected.<h3>',dialogWarn(a)):(c=m_child_list.appendTable(b),c&&$(".m_search_trial_add input[type=checkbox]").removeAttr("checked"))}var b={};BootstrapDialog.show({title:'<span class="glyphicon glyphicon-question-sign" aria-hidden="true"></span>&nbsp;&nbsp;Add Trial',type:BootstrapDialog.TYPE_INFO,message:$("<div></div>").load(gVar.root+"/module/search_trial_add/module.php"),buttons:[{label:"Close",action:function(a){a.close()}},{label:"Add Trials",cssClass:"btn-success",action:function(){a()}}]})},m_child_list.appendTable=function(a){"use strict";function b(a){0===$(".m_child_list .childTable .noResults").length?$(".m_child_list .childTable tbody").append(a):$(".m_child_list .childTable tbody").html(a)}var c="";$.ajax({type:"POST",url:gVar.root+"/module/child_list/dist/sql_appendTable.php",data:{seqCSV:JSON.stringify(a.csv)},dataType:"json",success:function(a){return"success"===a.status?(b(a.html),!0):(c='<h3 style="text-align:center;">There was an error. Trial(s) not added to the group.</h3>',dialogError(c),!1)},error:function(a,b,d){return c="Status: "+b+"\nError: "+d,dialogError(c),!1}})},m_child_list.removeClick=function(a){"use strict";function b(a){var b="";a.remove(),0===$(".m_child_list tbody tr").length&&(b='<tr class="noResults"><td colspan="5" style="text-align:center; padding:10px;">No trials found</td></tr>',$(".m_child_list .childTable tbody").html(b))}a=a.closest("tr"),BootstrapDialog.confirm({title:'<span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>&nbsp;&nbsp;Warning',type:BootstrapDialog.TYPE_WARNING,message:'<h2 style="text-align:center;">Are you sure?</h2>\n\nThis will remove the trial from this group. It will not delete the trial from the database.',closable:!1,callback:function(c){c&&b(a)}})},$(document).ready(function(){m_child_list.watch()});