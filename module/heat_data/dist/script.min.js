var m_heat_data={};m_heat_data.create=function(a){"use strict";var b=null,c=null,d=null;"write"===a?(b=['<span class="required">Heat #</span>','<span class="required">Tap Year (YY)</span>',"BOP Vsl","Degas Vsl","Argon #","Caster #","Strand #","Comments"],c=[18,25,18,18,18,18,18],d=!1):(b=["<span>Heat #</span>","<span>Tap Year</span>","BOP Vsl","Degas Vsl","Argon #","Caster #","Strand #","Comments"],c=[18,18,18,18,18,18,18],d=!0);var e=$(".m_heat_data .dataTable");e.handsontable({colHeaders:b,colWidths:c,manualColumnResize:!0,columns:[{data:0,type:"text",readOnly:d},{data:1,type:"text",readOnly:d},{data:2,type:"text",readOnly:d},{data:3,type:"text",readOnly:d},{data:4,type:"text",readOnly:d},{data:5,type:"text",readOnly:d},{data:6,type:"text",readOnly:d},{data:7,type:"text",readOnly:d}],rowHeaders:!0,manualRowResize:!0,minRows:10,minSpareRows:1,stretchH:"all",scrollV:"auto",columnSorting:!0,contextMenu:!0})},m_heat_data.populate=function(a){"use strict";var b="";if(""!==a){var c=$(".m_heat_data .dataTable").handsontable("getInstance");$.ajax({type:"POST",url:gVar.root+"/module/heat_data/dist/sql_read_heat_data.php",data:{seq:JSON.stringify(a)},dataType:"json",success:function(a){c.loadData(a.data)},error:function(a,c,d){b="Status: "+c+"\nError: "+d,dialogError(b)}})}},m_heat_data.validate=function(){"use strict";var a="",b=$(".m_heat_data .dataTable").handsontable("getInstance").getData(),c=null,d=null;return b=m_heat_data.parse(),$.each(b,function(b,e){return c=e[1],d=e[2],"NULL"===c&&(c=null),"NULL"===d&&(d=null),null===c||null===d?(a+="<li>'Heat #' and 'Tap Year' are required on all used rows in the 'Trial Data' table.</li>",!1):void 0}),$.each(b,function(b,c){return d=c[2],null!==d&&2!=d.length?(a+="<li>'Tap Year' must be in 'YY' format (e.g. 15 for 2015) in the 'Trial Data' table.</li>",!1):void 0}),b.length!==uniqueArr(b,[1,2]).length&&(a+="<li>Duplicate heats are not allowed in 'Trial Data' table.</li>"),a},m_heat_data.parse=function(){"use strict";var a=null,b=$(".m_heat_data .dataTable").handsontable("getInstance").getData(),c=[],d=1;return $.each(b,function(b,e){a=!0,$.each(e,function(b,c){0===ifNull(c,"").replace(/ /g,"").length&&(c=null),null!==c&&(a=!1),e[b]=c}),a||(e.unshift(d),c.push(e),d+=1)}),c};