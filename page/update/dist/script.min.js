var p_update={};p_update.watch=function(){"use strict";$(".p_update .c_submitBtn .updateBtn").click(function(){p_update.updateClick()}),$(".p_update .c_submitBtn .deleteBtn").click(function(){p_update.deleteClick()})},p_update.updateClick=function(){"use strict";var a=getURLVariable("trialseq"),b=getURLVariable("groupseq"),c="",d="",e="",f="";a?(d="trial",c=a):b&&(d="group",c=b),"trial"===d?(e+=m_info.validate(),e+=m_heat_data.validate()):"group"===d&&(e+=m_info.validate()),0===e.length?($(".p_update .c_errorBox").html(""),p_update.updateFunc(d,c)):(f='<h3>Please fix these items:</h3><div class="errorList">  <ul>'+e+"</ul></div>",BootstrapDialog.alert({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:f}),e='<div class="alert alert-danger">    <ul>'+e+"</ul></div>",$(".p_update .c_errorBox").html(e))},p_update.updateFunc=function(a,b){"use strict";var c=m_info.parse(),d={},e=m_comment_list.parse(),f=[],g=gVar.root+"/page/update/dist/sql_update.php",h="",i="",j="";"trial"===a?(d=m_heat_data.parse(),h="view?trialseq=",i="Trial successfully updated.",j="Something went wrong. Trial not updated."):"group"===a&&(f=m_child_list.parse(),h="view?groupseq=",i="Group successfully updated.",j="Something went wrong. Group not updated."),$.ajax({type:"POST",url:g,data:{pageType:a,seq:b,info:JSON.stringify(c),oldCommentList:JSON.stringify(e.oldArr),newCommentList:JSON.stringify(e.newArr),heatData:JSON.stringify(d),childTrialList:JSON.stringify(f)},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">'+i+"</h3>",buttons:[{label:"OK",action:function(){b.close(),document.location.href=h+a.seq}}]});b.open()}else{var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">'+j+"</h3>",buttons:[{label:"OK",action:function(a){b.close()}}]});b.open(),console.log(a.errors),console.log(a.debugSQL)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){d.close()}}]});d.open()}})},p_update.deleteClick=function(){"use strict";var a=getURLVariable("trialseq"),b=getURLVariable("groupseq"),c="",d="";a?(d="trial",c=a):b&&(d="group",c=b),p_update.deleteFunc(d,c)},p_update.deleteFunc=function(a,b){"use strict";var c=gVar.root+"/page/update/dist/sql_delete.php",d=gVar.root,e="",f="";"trial"===a?(e="Trial successfully deleted.",f="Something went wrong. Trial not deleted."):"group"===a&&(e="Group successfully deleted.",f="Something went wrong. Group not deleted."),$.ajax({type:"POST",url:c,data:{pageType:a,seq:b},dataType:"json",success:function(a){if("success"===a.status){var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ok-circle" aria-hidden="true"></span>&nbsp;&nbsp;Success',type:BootstrapDialog.TYPE_SUCCESS,message:'<h3 style="text-align:center;">'+e+"</h3>",buttons:[{label:"OK",action:function(){document.location.href=d}}]});b.open()}else{var b=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:'<h3 style="text-align:center;">'+f+"</h3>",buttons:[{label:"OK",action:function(a){a.close()}}]});b.open(),console.log(a.errors)}},error:function(a,b,c){var d=new BootstrapDialog({title:'<span class="glyphicon glyphicon-ban-circle" aria-hidden="true"></span>&nbsp;&nbsp;Error',type:BootstrapDialog.TYPE_DANGER,message:"Status: "+b+"\nError: "+c,buttons:[{label:"OK",action:function(a){a.close()}}]});d.open()}})},$(document).ready(function(){p_update.watch()});